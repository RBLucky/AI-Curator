{% extends "base.html" %}
{% block title %}Home - AI Curator{% endblock %}
{% block content %}

<!-- Hero Section -->
<section style="padding: 4rem 0; text-align: center; position: relative;">
    <!-- Floating background elements -->
    <div style="position: absolute; top: 20%; left: 20%; width: 200px; height: 200px; background: radial-gradient(circle, rgba(139, 92, 246, 0.3), transparent); border-radius: 50%; filter: blur(60px); animation: float 15s ease-in-out infinite;"></div>
    <div style="position: absolute; top: 30%; right: 20%; width: 150px; height: 150px; background: radial-gradient(circle, rgba(0, 212, 255, 0.3), transparent); border-radius: 50%; filter: blur(40px); animation: float 20s ease-in-out infinite reverse;"></div>
    
    <div style="position: relative; z-index: 10;">
        <h1 style="font-size: 3.5rem; margin-bottom: 1.5rem; line-height: 1.2;">
            Welcome to the AI Curator!
        </h1>
        
        <p style="font-size: 1.3rem; color: var(--text-muted); max-width: 800px; margin: 0 auto 3rem; line-height: 1.6;">
            Your curated hub for the latest news and tools in the world of 
            <span style="color: var(--neon-cyan); font-weight: 600; text-shadow: 0 0 10px var(--neon-cyan);">Artificial Intelligence</span>
        </p>

        <!-- AI Search Bar -->
        <div style="max-width: 700px; margin: 0 auto 3rem; position: relative;">
            <div class="ai-search-container">
                <form id="ai-search-form" method="POST" action="{% url 'home' %}" style="position: relative;">
                    {% csrf_token %}
                    <div class="search-input-container">
                        <svg class="search-icon" width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="M21 21l-4.35-4.35"></path>
                        </svg>
                        <input 
                            type="text" 
                            name="ai_query"
                            id="ai-query-input"
                            placeholder="Ask AI anything about tools, news, or AI concepts..."
                            class="ai-search-input"
                            required
                        />
                        <button type="submit" class="ai-search-btn" id="ai-search-submit">
                            <span class="search-text">ü§ñ Ask AI</span>
                            <span class="loading-text" style="display: none;">
                                <svg class="spinner" width="20" height="20" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" opacity="0.25"></circle>
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none" stroke-dasharray="31.416" stroke-dashoffset="31.416" opacity="0.75">
                                        <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416" repeatCount="indefinite"/>
                                        <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416" repeatCount="indefinite"/>
                                    </circle>
                                </svg>
                                Thinking...
                            </span>
                        </button>
                    </div>
                    
                    <!-- Suggestions -->
                    <div class="search-suggestions">
                        <span class="suggestion-chip" onclick="fillSearch('What is GPT-4?')">What is GPT-4?</span>
                        <span class="suggestion-chip" onclick="fillSearch('Latest AI news')">Latest AI news</span>
                        <span class="suggestion-chip" onclick="fillSearch('Best AI tools for coding')">Best AI tools for coding</span>
                        <span class="suggestion-chip" onclick="fillSearch('How does machine learning work?')">How does ML work?</span>
                    </div>
                </form>
            </div>
        </div>

        <!-- AI Response Area -->
        {% if ai_response %}
        <div class="ai-response-container">
            <div class="ai-response-header">
                <div class="ai-avatar">ü§ñ</div>
                <h3>AI Response</h3>
            </div>
            <div class="ai-response-content">
                {{ ai_response|linebreaks }}
            </div>
        </div>
        {% endif %}

        <!-- Call to action buttons -->
        <div style="display: flex; flex-wrap: wrap; gap: 1rem; justify-content: center; margin-bottom: 3rem;">
            <a href="{% url 'curator_app:news_list' %}" class="btn-futuristic" style="font-size: 1.1rem; padding: 15px 30px;">
                Explore Latest News
            </a>
            <a href="{% url 'curator_app:tool_list' %}" class="btn-futuristic" style="background: linear-gradient(45deg, var(--primary-blue), var(--secondary-blue)); border: 2px solid var(--neon-cyan); font-size: 1.1rem; padding: 15px 30px;">
                Discover AI Tools
            </a>
        </div>

        <!-- Floating icons -->
        <div style="position: absolute; top: 10%; left: 10%; font-size: 2rem; opacity: 0.4; animation: bounce 3s ease-in-out infinite;">ü§ñ</div>
        <div style="position: absolute; top: 20%; right: 15%; font-size: 1.8rem; opacity: 0.4; animation: bounce 3s ease-in-out infinite 1s;">‚ö°</div>
        <div style="position: absolute; bottom: 20%; left: 15%; font-size: 1.5rem; opacity: 0.4; animation: bounce 3s ease-in-out infinite 2s;">üöÄ</div>
    </div>
</section>

<!-- Content Grid -->
<div class="grid grid-2" style="margin-top: 3rem;">
    
    <!-- News Section -->
    <section>
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 style="font-size: 2.2rem; margin-bottom: 1rem; background: linear-gradient(45deg, var(--light-purple), var(--neon-cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                Latest AI News
            </h2>
            <p style="color: var(--text-muted); font-size: 1.1rem;">Stay updated with cutting-edge developments</p>
        </div>

        {% for item in latest_news %}
            <article class="card">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                    <span style="background: linear-gradient(45deg, var(--neon-cyan), var(--light-purple)); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.8rem; font-weight: bold;">
                        AI NEWS
                    </span>
                    <span style="color: var(--text-muted); font-size: 0.9rem;">
                        {{ item.published_date|timesince }} ago
                    </span>
                </div>
                
                <h3 style="font-size: 1.2rem; font-weight: bold; margin-bottom: 1rem; color: var(--text-light);">
                    <a href="{{ item.link }}" target="_blank" style="color: inherit;">{{ item.title }}</a>
                </h3>
                
                <p style="color: var(--text-muted); margin-bottom: 1.5rem; line-height: 1.6;">
                    {{ item.summary|truncatewords:20 }}
                </p>
                
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <a href="{{ item.link }}" target="_blank" style="color: var(--neon-cyan); font-weight: 600; text-decoration: none;">
                        Read More ‚Üí
                    </a>
                    <div style="display: flex; gap: 0.5rem;">
                        <span style="font-size: 1.2rem;">üì∞</span>
                        <span style="font-size: 1.2rem;">üîó</span>
                    </div>
                </div>
            </article>
        {% empty %}
            <div class="card" style="text-align: center; padding: 3rem;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">ü§ñ</div>
                <h3 style="color: var(--text-light); margin-bottom: 1rem;">No News Found</h3>
                <p style="color: var(--text-muted);">Add some news sources in the admin panel to get started!</p>
            </div>
        {% endfor %}

        <div style="text-align: center; margin-top: 2rem;">
            <a href="{% url 'curator_app:news_list' %}" class="btn-futuristic">
                View All News
            </a>
        </div>
    </section>

    <!-- Tools Section -->
    <section>
        <div style="text-align: center; margin-bottom: 2rem;">
            <h2 style="font-size: 2.2rem; margin-bottom: 1rem; background: linear-gradient(45deg, var(--neon-purple), var(--light-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                Recently Added Tools
            </h2>
            <p style="color: var(--text-muted); font-size: 1.1rem;">Discover powerful AI tools with instant explanations</p>
        </div>

        {% for tool in latest_tools %}
            <article class="card">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                    <span style="background: linear-gradient(45deg, var(--accent-purple), var(--light-purple)); color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.8rem; font-weight: bold;">
                        AI TOOL
                    </span>
                    <div style="width: 2rem; height: 2rem; border-radius: 50%; background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple)); display: flex; align-items: center; justify-content: center;">
                        <span style="font-size: 1rem;">ü§ñ</span>
                    </div>
                </div>

                <h3 style="font-size: 1.2rem; font-weight: bold; margin-bottom: 1rem; color: var(--text-light);">
                    <a href="{% url 'curator_app:tool_detail' tool.pk %}" style="color: inherit;">{{ tool.name }}</a>
                </h3>
                
                <p style="color: var(--text-muted); margin-bottom: 1.5rem; line-height: 1.6;">
                    {{ tool.description|truncatewords:15 }}
                </p>
                
                <div style="display: flex; gap: 0.75rem;">
                    <a href="{% url 'curator_app:tool_detail' tool.pk %}" class="btn-futuristic" style="flex: 1; text-align: center; padding: 0.75rem 1rem; font-size: 0.9rem;">
                        ü§ñ Ask AI
                    </a>
                    <a href="{% url 'curator_app:tool_detail' tool.pk %}" style="padding: 0.75rem 1rem; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; color: var(--neon-cyan); text-decoration: none; transition: all 0.3s ease;">
                        üìñ
                    </a>
                </div>
            </article>
        {% empty %}
            <div class="card" style="text-align: center; padding: 3rem;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">üõ†Ô∏è</div>
                <h3 style="color: var(--text-light); margin-bottom: 1rem;">No Tools Found</h3>
                <p style="color: var(--text-muted);">Add some AI tools in the admin panel to get started!</p>
            </div>
        {% endfor %}

        <div style="text-align: center; margin-top: 2rem;">
            <a href="{% url 'curator_app:tool_list' %}" class="btn-futuristic">
                Explore All Tools
            </a>
        </div>
    </section>
</div>

<style>
    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }

    /* AI Search Bar Styles */
    .ai-search-container {
        position: relative;
        margin-bottom: 2rem;
    }

    .search-input-container {
        position: relative;
        display: flex;
        align-items: center;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 2px solid var(--glass-border);
        border-radius: 50px;
        padding: 4px;
        transition: all 0.3s ease;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .search-input-container:focus-within {
        border-color: var(--neon-cyan);
        box-shadow: 
            0 10px 30px rgba(0, 0, 0, 0.2),
            0 0 30px rgba(0, 212, 255, 0.3);
    }

    .search-icon {
        position: absolute;
        left: 20px;
        z-index: 10;
        color: var(--text-muted);
        transition: color 0.3s ease;
    }

    .search-input-container:focus-within .search-icon {
        color: var(--neon-cyan);
    }

    .ai-search-input {
        flex: 1;
        background: transparent;
        border: none;
        outline: none;
        padding: 18px 20px 18px 60px;
        font-size: 1.1rem;
        color: var(--text-light);
        font-family: 'Rajdhani', sans-serif;
        font-weight: 500;
    }

    .ai-search-input::placeholder {
        color: var(--text-muted);
        font-style: italic;
    }

    .ai-search-btn {
        background: linear-gradient(45deg, var(--accent-purple), var(--light-purple));
        border: none;
        border-radius: 40px;
        padding: 14px 28px;
        color: white;
        font-family: 'Orbitron', monospace;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
        white-space: nowrap;
    }

    .ai-search-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 25px var(--light-purple);
    }

    .spinner {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* Search Suggestions */
    .search-suggestions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        margin-top: 20px;
        opacity: 0.8;
    }

    .suggestion-chip {
        background: var(--glass-bg);
        backdrop-filter: blur(10px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 8px 16px;
        font-size: 0.9rem;
        color: var(--text-muted);
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: 'Rajdhani', sans-serif;
    }

    .suggestion-chip:hover {
        background: var(--accent-purple);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(107, 70, 193, 0.3);
    }

    /* AI Response Styles */
    .ai-response-container {
        max-width: 800px;
        margin: 2rem auto;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 2rem;
        text-align: left;
        animation: slideUp 0.6s ease-out;
    }

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .ai-response-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid var(--glass-border);
    }

    .ai-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: linear-gradient(45deg, var(--neon-cyan), var(--neon-purple));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
    }

    .ai-response-header h3 {
        color: var(--text-light);
        font-family: 'Orbitron', monospace;
        margin: 0;
    }

    .ai-response-content {
        color: var(--text-light);
        line-height: 1.6;
        font-size: 1.1rem;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .search-input-container {
            flex-direction: column;
            border-radius: 20px;
            padding: 8px;
        }

        .ai-search-input {
            padding: 16px 20px;
            text-align: center;
        }

        .search-icon {
            display: none;
        }

        .ai-search-btn {
            width: 100%;
            justify-content: center;
            margin-top: 8px;
        }

        .search-suggestions {
            margin-top: 15px;
        }

        .suggestion-chip {
            font-size: 0.8rem;
            padding: 6px 12px;
        }
    }
</style>

<script>
    function fillSearch(query) {
        document.getElementById('ai-query-input').value = query;
        document.getElementById('ai-query-input').focus();
    }

    // Handle form submission with loading state
    document.getElementById('ai-search-form').addEventListener('submit', function(e) {
        const submitBtn = document.getElementById('ai-search-submit');
        const searchText = submitBtn.querySelector('.search-text');
        const loadingText = submitBtn.querySelector('.loading-text');
        
        searchText.style.display = 'none';
        loadingText.style.display = 'flex';
        submitBtn.disabled = true;
    });

    // Auto-focus search on page load
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('ai-query-input').focus();
    });
</script>

{% endblock %}